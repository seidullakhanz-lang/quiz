<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Салт-дәстүр викторина</title>
<style>
body{font-family:Arial, sans-serif; background:#f5f5f5; padding:20px; display:flex; justify-content:center; flex-direction:column; align-items:center;}
.card{background:white; padding:20px; border-radius:10px; width:100%; max-width:650px; box-shadow:0 6px 20px rgba(0,0,0,0.1);}
img{width:100%; border-radius:10px; margin:12px 0;}
h1{margin:0 0 10px;}
.question{font-weight:bold; margin:10px 0;}
.choices{list-style:none; padding:0;}
.choices li{margin:8px 0;}
.btn{padding:10px; border:none; border-radius:6px; cursor:pointer;}
.btn-choice{width:100%; background:#eef2ff;}
.correct{background:#c7f7c7 !important;}
.wrong{background:#ffc8c8 !important;}
.btn-next{background:#3a7afe; color:white; margin-top:12px;}
.btn-disabled{opacity:0.5; cursor:not-allowed;}
.result{margin-top:15px; background:#e6f3ff; padding:10px; border-radius:6px;}
#certificate{display:none; position:relative; width:700px; height:500px; background:linear-gradient(135deg, #fff0f5, #e6e6fa); border:8px solid #ff69b4; border-radius:20px; box-shadow:0 0 20px rgba(0,0,0,0.3); text-align:center; padding:30px; overflow:hidden; margin-top:20px;}
#certificate h2{font-size:40px; color:#ff1493; margin:0;}
#certificate p{font-size:22px; color:#4b0082; margin:15px 0;}
.sticker{position:absolute; width:100px; height:100px; background-size:cover; animation: float 4s ease-in-out infinite;}
.sticker1 { top: 20px; left: 20px; background-image: url('https://i.ibb.co/7V9Yx5S/star.png'); }
.sticker2 { bottom: 30px; right: 40px; background-image: url('https://i.ibb.co/9tL7yQv/heart.png'); }
.sticker3 { top: 50px; right: 50px; background-image: url('https://i.ibb.co/5R5D5hR/confetti.png'); }
@keyframes float {0%,100%{transform:translateY(0px) rotate(0deg);}50%{transform:translateY(-20px) rotate(20deg);}}
button.download-btn{padding:12px 25px; font-size:18px; border:none; border-radius:10px; background:linear-gradient(to right, #ff69b4, #ff1493); color:white; cursor:pointer; margin-top:20px;}
button.download-btn:hover{transform:scale(1.05);}
</style>
</head>
<body>

<div class="card">
<h1>Суретті салт-дәстүр викторинасы</h1>

<audio id="bgMusic" src="12.mp3" autoplay loop controls></audio>

<img id="qImage" src="" alt="Сурет жүктелуде...">
<div id="questionText" class="question"></div>
<ul id="choicesList" class="choices"></ul>
<button id="nextBtn" class="btn btn-next btn-disabled" disabled>Келесі</button>
<div id="feedback" class="result" style="display:none;"></div>
<div id="final" style="display:none;">
<p class="result">Ойын аяқталды! Ұпай: <span id="score">0</span> / <span id="total">0</span></p>
<button onclick="location.reload()" class="btn btn-next">Қайта бастау</button>
<button id="showCertificate" class="btn btn-next">Сертификат алу</button>
</div>
</div>

<!-- Сертификат блок -->
<div id="certificate">
    <div class="sticker sticker1"></div>
    <div class="sticker sticker2"></div>
    <div class="sticker sticker3"></div>
    <h2>Құттықтаймыз!</h2>
    <p>Сіз викторинаны аяқтадыңыз!</p>
    <p id="certScore"></p>
    <button class="download-btn" id="downloadCert">Сертификатты жүктеу</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
const questions = [
{img:"q1.jpg",choices:["Бесікке салу","Наурыз көже","Тұсау кесу"],answer:0},
{img:"q2.jpg",q:"Бұл баланың аяқ жібін кесу қалай аталады?",choices:["Шілдехана","Тұсау кесу","Тілашар"],answer:1},
{img:"q3.jpg",q:"Бұл көрініс қай мерекеге тән?",choices:["Құрбан айт","Жаңа жыл","Наурыз мейрамы"],answer:2},
{img:"q4.jpg",q:"Бұл рәсім қалай аталады?",choices:["Тілашар","Бата беру","Шілдехана"],answer:1},
{img:"q5.jpg",q:"Қазақтың дәстүрлі ойыны?",choices:["Асық","Тоғызқұмалақ","Арқан тартыс"],answer:0},
{img:"q6.jpg",q:"Бұл киіз үйдің қай бөлігі?",choices:["Шаңырақ","Уық","Кереге"],answer:0},
{img:"q7.jpg",q:"Бұл қандай тағам?",choices:["Қымыз","Наурыз көже","Шұбат"],answer:1},
{img:"q8.jpg",q:"Кімнің киімі?",choices:["Батыр","Қыз","Жас келін"],answer:1},
{img:"q9.jpg",q:"Қандай дәстүрлі ойын?",choices:["Қыз қуу","Көкпар","Асық"],answer:1},
{img:"q10.jpg",q:"Бұл неге қатысты?",choices:["Той","Жылдың басы","Бала тәрбиесі"],answer:1}
];

let current=0,score=0;
const qText=document.getElementById("questionText"),
qImage=document.getElementById("qImage"),
choicesList=document.getElementById("choicesList"),
nextBtn=document.getElementById("nextBtn"),
feedback=document.getElementById("feedback"),
finalBox=document.getElementById("final"),
certificate=document.getElementById("certificate"),
certScore=document.getElementById("certScore"),
showCertBtn=document.getElementById("showCertificate"),
downloadCertBtn=document.getElementById("downloadCert");

function loadQuestion(){
if(current>=questions.length){endGame();return;}
const item=questions[current];
qImage.src=item.img;
qText.textContent=item.q;
choicesList.innerHTML="";
nextBtn.disabled=true;
nextBtn.classList.add("btn-disabled");
item.choices.forEach((choice,index)=>{
const li=document.createElement("li");
const btn=document.createElement("button");
btn.className="btn btn-choice";
btn.textContent=choice;
btn.onclick=()=> selectAnswer(index);
li.appendChild(btn);
choicesList.appendChild(li);
});
feedback.style.display="none";
}

function selectAnswer(index){
const correct=questions[current].answer;
const buttons=document.querySelectorAll(".btn-choice");
buttons.forEach((btn,i)=>{
btn.disabled=true;
if(i===correct) btn.classList.add("correct");
else if(i===index) btn.classList.add("wrong");
});
if(index===correct){score++;feedback.textContent="Дұрыс! +1 ұпай";}
else{feedback.textContent="Қате. Дұрыс жауап жасыл түсте.";}
feedback.style.display="block";
nextBtn.disabled=false;
nextBtn.classList.remove("btn-disabled");
}

nextBtn.onclick=()=>{current++;loadQuestion();};

function endGame(){
document.getElementById("score").textContent=score;
document.getElementById("total").textContent=questions.length;
document.querySelector(".question").style.display="none";
qImage.style.display="none";
choicesList.style.display="none";
nextBtn.style.display="none";
feedback.style.display="none";
finalBox.style.display="block";
}

// Сертификатты көрсету
showCertBtn.onclick = () => {
certScore.textContent = `Ұпай: ${score} / ${questions.length}`;
certificate.style.display = "block";
certificate.scrollIntoView({behavior:"smooth"});
}

// Сертификатты жүктеу
downloadCertBtn.onclick = () => {
html2canvas(certificate).then(canvas => {
const link = document.createElement('a');
link.download = 'certificate.png';
link.href = canvas.toDataURL();
link.click();
});
}

loadQuestion();
</script>

</body>
</html>

